import{j as e,V as P,r as s,U as q,C as z,q as G,E as w,az as v,aA as $,B as F}from"./index-CKP-uMfZ.js";import{C,a as H}from"./CardDetail-DRTj2SYF.js";import{T as J,a as Q,b as N,R as W,N as _,c as k}from"./RarityFilter-BOr0SosJ.js";import{A as x,a as m,b as f}from"./alert-B2U91al6.js";import{S as g}from"./siren-C6ceICjG.js";import"./Card-BMV3Z61v.js";function X(){return e.jsx("article",{className:"mx-auto grid max-w-4xl gap-5",children:e.jsxs(x,{className:"mb-8 border-1 border-neutral-700 shadow-none",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx(m,{children:"You have all tradeable cards!"}),e.jsx(f,{children:"Make sure you come back here when new rarities and packs are available for trade."})]})})}function Z(){return e.jsx("article",{className:"mx-auto grid max-w-4xl gap-5",children:e.jsxs(x,{className:"mb-8 border-1 border-neutral-700 shadow-none",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx(m,{children:"You have no sellable cards!"}),e.jsx(f,{children:"If you believe you have sellable cards, go to the collections page and input your collected cards to see what you can sell."})]})})}function ee(){return e.jsx("article",{className:"mx-auto grid max-w-4xl gap-5",children:e.jsxs(x,{className:"mb-8 border-1 border-neutral-700 shadow-none",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx(m,{children:"You have no tradeable cards!"}),e.jsx(f,{children:"Go to the collections page and input your collected cards to see what you can trade."})]})})}function re(){return e.jsx("article",{className:"mx-auto grid max-w-4xl gap-5",children:e.jsxs(x,{className:"mb-8 border-1 border-neutral-700 shadow-none",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx(m,{children:"Sign up to view your tradeable cards"}),e.jsx(f,{children:"By registering, you can keep track of your collection, trade with other users, and access exclusive features."})]})})}function ie(){const M=P(),{user:I,account:o,setIsProfileDialogOpen:S}=s.use(q),{ownedCards:t,selectedCardId:R,setSelectedCardId:A}=s.use(z),[l,B]=s.useState([]),[b,D]=s.useState(0),[h,E]=s.useState(2),[j,L]=s.useState(3),[i,K]=s.useState("looking_for"),T=s.useMemo(()=>G.filter(a=>a.tradeable).map(a=>a.id),[]),p=a=>l.length===0?!0:a.rarity!==""&&l.includes(a.rarity),d=s.useMemo(()=>w.filter(a=>t.findIndex(r=>r.card_id===a.card_id)===-1||t[t.findIndex(r=>r.card_id===a.card_id)].amount_owned<=b).filter(a=>v[a.rarity]!==null&&T.includes(a.expansion)),[t,b]),U=s.useMemo(()=>d.filter(p),[d,l]),c=s.useMemo(()=>{const a=t.filter(r=>r.amount_owned>=h);return w.filter(r=>a.findIndex(n=>n.card_id===r.card_id)>-1).map(r=>{var n;return{...r,amount_owned:(n=a.find(y=>y.card_id===r.card_id))==null?void 0:n.amount_owned}}).filter(r=>v[r.rarity]!==null&&T.includes(r.expansion))},[t,h]),V=s.useMemo(()=>c.filter(p),[c,l]),u=s.useMemo(()=>{const a=t.filter(r=>r.amount_owned>=j);return w.filter(r=>a.findIndex(n=>n.card_id===r.card_id)>-1).map(r=>{var n;return{...r,amount_owned:(n=a.find(y=>y.card_id===r.card_id))==null?void 0:n.amount_owned}}).filter(r=>$[r.rarity]!==null)},[t,j]),Y=s.useMemo(()=>u.filter(p),[u,l]),O=()=>{S(!0)};return I?e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsxs(J,{defaultValue:i,onValueChange:a=>K(a),children:[e.jsxs("div",{className:"mx-auto max-w-[900px] flex flex-row flex-wrap align-center gap-x-4 gap-y-2 px-4",children:[e.jsxs(Q,{className:"flex-grow m-auto flex-wrap h-auto border-1 border-neutral-700 rounded-md",children:[e.jsx(N,{value:"looking_for",children:"Looking For"}),e.jsx(N,{value:"for_trade",children:"For Trade"}),e.jsx(N,{value:"buying_tokens",children:"Buying Tokens"})]}),e.jsx(W,{rarityFilter:l,setRarityFilter:B}),e.jsxs("div",{className:"sm:mt-1 flex flex-row flex-wrap align-center gap-x-4 gap-y-1",children:[i==="looking_for"&&e.jsx(_,{numberFilter:b,setNumberFilter:D,options:[0,1,2,3,4,5],labelKey:"maxNum"}),i==="for_trade"&&e.jsx(_,{numberFilter:h,setNumberFilter:E,options:[2,3,4,5],labelKey:"minNum"}),i==="buying_tokens"&&e.jsx(_,{numberFilter:j,setNumberFilter:L,options:[2,3,4,5],labelKey:"minNum"}),o!=null&&o.is_public?e.jsx(F,{variant:"outline",onClick:()=>M(`/collection/${o==null?void 0:o.friend_id}/trade`),children:"Open trading page"}):e.jsx(F,{variant:"outline",onClick:()=>O(),children:"Enable trading page"})]})]}),e.jsxs("div",{className:"mx-auto max-w-[900px] ",children:[e.jsx(k,{value:"looking_for",children:d&&d.length>0?e.jsx(C,{cards:U}):e.jsx(X,{})}),e.jsx(k,{value:"for_trade",children:c&&c.length>0?e.jsx(C,{cards:V}):e.jsx(ee,{})}),e.jsx(k,{value:"buying_tokens",children:u&&u.length>0?e.jsx(C,{cards:Y}):e.jsx(Z,{})})]})]}),e.jsx(H,{cardId:R,onClose:()=>A("")})]}):e.jsx(re,{})}export{ie as default};
