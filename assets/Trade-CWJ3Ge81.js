import{r,j as e,C as b,U as k}from"./index-A1xj8mFx.js";import{T as C,a as T,b as f,c as w}from"./tabs-DeAQya-m.js";import{c as M,u as R,g as E,b as F,a as G,F as j}from"./FancyCard-Bqbyaq_7.js";import{t as h,e as y,b as N}from"./CardsDB-CePrsvJ-.js";function v({cards:a,cardElement:d}){const l=M(),n=r.useRef(null),o=r.useMemo(()=>[l.accessor("image",{id:"imageUrl"}),l.accessor("card_id",{id:"card_id"}),l.accessor("name",{id:"name"}),l.accessor("pack",{id:"pack"})],[]),u=R({columns:o,data:a,enableGrouping:!0,getCoreRowModel:F(),getGroupedRowModel:E(),initialState:{grouping:["pack"]}}).getRowModel().rows.map(i=>{const x={type:"header",row:i},p=i.subRows.map(m=>({type:"data",row:m})),g=[];for(let m=0;m<p.length;m+=5)g.push(p.slice(m,m+5));return{header:x,gridRows:g}}).flatMap(i=>[{type:"header",height:45,data:i.header},...i.gridRows.map(x=>({type:"gridRow",height:269,data:x}))]),_=G({getScrollElement:()=>n.current,count:u.length,estimateSize:i=>(u[i].type==="header"?45:269)+12,overscan:5});return e.jsx("div",{ref:n,className:"h-[calc(100vh-180px)] overflow-y-auto",children:e.jsx("div",{style:{height:`${_.getTotalSize()}px`,position:"relative"},className:"w-full",children:_.getVirtualItems().map(i=>{const x=u[i.index];return e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${i.size}px`,transform:`translateY(${i.start}px)`},children:x.type==="header"?e.jsx("h2",{className:"mx-auto mt-10 w-[900px] scroll-m-20 border-b pb-2 font-semibold text-3xl tracking-tight transition-colors first:mt-0",children:x.data.row.getValue("pack")}):e.jsx("div",{className:"flex justify-center gap-5",children:x.data.map(({row:p})=>{const g=p.original;return d(g)})})},i.key)})})})}function $({card:a}){const d=r.useMemo(()=>(a.amount_owned||1)-1,[a.amount_owned]),l=r.useMemo(()=>d*h[a.rarity],[d,a.rarity]);return e.jsxs("div",{className:"group flex w-fit flex-col items-center gap-y-2 rounded-lg border border-gray-700 p-4 shadow-md transition duration-200 hover:shadow-lg",children:[e.jsx(j,{card:a,selected:!0},`card_${a.card_id}`),e.jsxs("p",{className:"max-w-[130px] overflow-hidden text-ellipsis whitespace-nowrap font-semibold text-[12px]",children:[a.card_id," - ",a.name]}),e.jsxs("div",{className:"flex flex-row gap-x-2",children:[e.jsx("div",{className:"rounded-xl bg-fuchsia-600",children:e.jsx("span",{className:"m-3 font-semibold text-lg",children:d})}),e.jsx("div",{className:"rounded-xl bg-gray-600",children:e.jsx("span",{className:"m-3 font-semibold text-lg",children:l})})]})]},`div_${a.card_id}`)}function I(){return e.jsx("article",{className:"mx-auto grid max-w-7xl gap-5",children:e.jsx("section",{className:"mx-auto h-full w-full max-w-screen-xl rounded-4xl border-2 border-gray-500 p-10 text-center lg:px-6 lg:py-16",children:e.jsxs("div",{className:"mx-auto max-w-screen-md sm:text-center",children:[e.jsx("h2",{className:"mb-4 font-extrabold text-3xl tracking-tight sm:text-4xl",children:"You have no sellable cards!"}),e.jsx("p",{className:"mx-auto mb-4 max-w-2xl sm:text-xl",children:"If you believe you have sellable cards, go to the collections page and input your collected cards to see what you can sell"})]})})})}function S(){const{ownedCards:a}=r.use(b),d=r.useMemo(()=>y.filter(t=>t.tradeable).map(t=>t.id),[]),l=r.useMemo(()=>Object.fromEntries(Object.entries(h).filter(([t,c])=>c>0)),[]),n=r.useMemo(()=>a.filter(t=>t.amount_owned>1),[a]),o=r.useMemo(()=>N.filter(t=>n.findIndex(c=>c.card_id===t.card_id)>-1).map(t=>{var c;return{...t,amount_owned:(c=n.find(u=>u.card_id===t.card_id))==null?void 0:c.amount_owned}}),[n]),s=r.useMemo(()=>o.filter(t=>Object.keys(l).includes(t.rarity)&&d.includes(t.expansion)),[o]);return s&&s.length>0?e.jsx(v,{cards:s,cardElement:t=>e.jsx($,{card:t})}):e.jsx(I,{})}function B({card:a}){return e.jsxs("div",{className:"group flex w-fit flex-col items-center gap-y-2 rounded-lg border border-gray-700 p-4 shadow-md transition duration-200 hover:shadow-lg",children:[e.jsx(j,{card:a,selected:!0,setIsSelected:()=>{}},`card_${a.card_id}`),e.jsxs("p",{className:"max-w-[130px] overflow-hidden text-ellipsis whitespace-nowrap font-semibold text-[12px]",children:[a.card_id," - ",a.name]}),e.jsx("div",{className:"rounded-xl bg-gray-600",children:e.jsx("span",{className:"m-3 font-semibold text-lg",children:(a.amount_owned||1)-1})})]},`div_${a.card_id}`)}function O(){return e.jsx("article",{className:"mx-auto grid max-w-7xl gap-5",children:e.jsx("section",{className:"mx-auto h-full w-full max-w-screen-xl rounded-4xl border-2 border-gray-500 p-10 text-center lg:px-6 lg:py-16",children:e.jsxs("div",{className:"mx-auto max-w-screen-md sm:text-center",children:[e.jsx("h2",{className:"mb-4 font-extrabold text-3xl tracking-tight sm:text-4xl",children:"Go Track Your Cards"}),e.jsx("p",{className:"mx-auto mb-4 max-w-2xl sm:text-xl",children:"To view your tradable cards, you must track your current collection."}),e.jsx("p",{className:"mx-auto max-w-2xl sm:text-xl",children:"By tracking your cards, you can see what cards you still need to get, what cards you can trade with friends, and how many trade tokens you can earn with your current collection."})]})})})}function Y(){return e.jsx("article",{className:"mx-auto grid max-w-7xl gap-5",children:e.jsx("section",{className:"mx-auto h-full w-full max-w-screen-xl rounded-4xl border-2 border-gray-500 p-10 text-center lg:px-6 lg:py-16",children:e.jsxs("div",{className:"mx-auto max-w-screen-md sm:text-center",children:[e.jsx("h2",{className:"mb-4 font-extrabold text-3xl tracking-tight sm:text-4xl",children:"You have no tradeable cards!"}),e.jsx("p",{className:"mx-auto mb-4 max-w-2xl sm:text-xl",children:"Go to the collections page and input your collected cards to see what you can trade"})]})})})}function z(){const{ownedCards:a}=r.use(b);if(!a||a.every(s=>s.amount_owned<2))return e.jsx(O,{});const d=r.useMemo(()=>y.filter(s=>s.tradeable).map(s=>s.id),[]),l=r.useMemo(()=>a.filter(s=>s.amount_owned>1),[a]),n=r.useMemo(()=>N.filter(s=>l.findIndex(t=>t.card_id===s.card_id)>-1).map(s=>{var t;return{...s,amount_owned:(t=l.find(c=>c.card_id===s.card_id))==null?void 0:t.amount_owned}}),[l]),o=r.useMemo(()=>n.filter(s=>Object.keys(h).includes(s.rarity)&&d.includes(s.expansion)),[n]);return o&&o.length>0?e.jsx(v,{cards:o,cardElement:s=>e.jsx(B,{card:s})}):e.jsx(Y,{})}function L({card:a}){return e.jsxs("div",{className:"group flex w-fit flex-col items-center gap-y-2 rounded-lg border border-gray-700 p-4 shadow-md transition duration-200 hover:shadow-lg",children:[e.jsx(j,{card:a,selected:!0,setIsSelected:()=>{}},`card_${a.card_id}`),e.jsxs("p",{className:"max-w-[130px] overflow-hidden text-ellipsis whitespace-nowrap font-semibold text-[12px]",children:[a.card_id," - ",a.name]}),e.jsx("div",{className:"rounded-xl bg-gray-600",children:e.jsx("span",{className:"m-3 font-semibold text-lg",children:h[a.rarity]})})]},`div_${a.card_id}`)}function V(){return e.jsx("article",{className:"mx-auto grid max-w-7xl gap-5",children:e.jsx("section",{className:"mx-auto h-full w-full max-w-screen-xl rounded-4xl border-2 border-gray-500 p-10 text-center lg:px-6 lg:py-16",children:e.jsxs("div",{className:"mx-auto max-w-screen-md sm:text-center",children:[e.jsx("h2",{className:"mb-4 font-extrabold text-3xl tracking-tight sm:text-4xl",children:"You have all tradeable cards!!"}),e.jsx("p",{className:"mx-auto mb-4 max-w-2xl sm:text-xl",children:"Make sure you come back here when new rarities and packs are available for trade."})]})})})}function U(){const{ownedCards:a}=r.use(b),d=r.useMemo(()=>N.filter(o=>a.findIndex(s=>s.card_id===o.card_id)===-1),[a]),l=r.useMemo(()=>y.filter(o=>o.tradeable).map(o=>o.id),[]),n=r.useMemo(()=>d.filter(o=>Object.keys(h).includes(o.rarity)&&l.includes(o.expansion)),[d]);return n&&n.length>0?e.jsx(v,{cards:n,cardElement:o=>e.jsx(L,{card:o})}):e.jsx(V,{})}function H(){return e.jsx("article",{className:"mx-auto grid max-w-7xl gap-5",children:e.jsx("section",{className:"mx-auto h-full w-full max-w-screen-xl rounded-4xl border-2 border-gray-500 p-10 text-center lg:px-6 lg:py-16",children:e.jsxs("div",{className:"mx-auto max-w-screen-md sm:text-center",children:[e.jsx("h2",{className:"mb-4 font-extrabold text-3xl tracking-tight sm:text-4xl",children:"Sign up to view your tradeable cards"}),e.jsx("p",{className:"mx-auto mb-4 max-w-2xl sm:text-xl",children:"To view your tradable cards, please log in."}),e.jsx("p",{className:"mx-auto max-w-2xl sm:text-xl",children:"By registering, you can keep track of your collection, trade with other users, and access exclusive features."})]})})})}function K(){const{user:a}=r.use(k);return a?e.jsx("div",{className:"flex flex-col gap-y-4",children:e.jsxs(C,{defaultValue:"looking_for",children:[e.jsx("div",{className:"mx-auto max-w-[900px]",children:e.jsxs(T,{className:"m-auto mt-4 mb-8",children:[e.jsx(f,{value:"looking_for",children:"Looking For"}),e.jsx(f,{value:"for_trade",children:"For Trade"}),e.jsx(f,{value:"buying_tokens",children:"Buying Tokens"})]})}),e.jsxs("div",{className:"mx-auto max-w-auto",children:[e.jsx(w,{value:"looking_for",children:e.jsx(U,{})}),e.jsx(w,{value:"for_trade",children:e.jsx(z,{})}),e.jsx(w,{value:"buying_tokens",children:e.jsx(S,{})})]})]})}):e.jsx(H,{})}export{K as default};
