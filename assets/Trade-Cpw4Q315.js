import{r as v,j as e}from"./index-Df4Gm_in.js";import{d as N,u as T,e as k,g as R,f as C,F as h,T as E,a as F,b as f,c as g}from"./FancyCard-CEDX7eFx.js";import{b as x,e as w,a as b}from"./CardsDB-CwQ6NIp-.js";function j({cards:a,cardElement:n}){const d=N(),t=v.useRef(null),s=v.useMemo(()=>[d.accessor("image",{id:"imageUrl"}),d.accessor("card_id",{id:"card_id"}),d.accessor("name",{id:"name"}),d.accessor("pack",{id:"pack"})],[]),p=T({columns:s,data:a,enableGrouping:!0,getCoreRowModel:C(),getGroupedRowModel:R(),initialState:{grouping:["pack"]}}).getRowModel().rows.map(o=>{const l={type:"header",row:o},u=o.subRows.map(c=>({type:"data",row:c})),m=[];for(let c=0;c<u.length;c+=5)m.push(u.slice(c,c+5));return{header:l,gridRows:m}}).flatMap(o=>[{type:"header",height:45,data:o.header},...o.gridRows.map(l=>({type:"gridRow",height:269,data:l}))]),y=k({getScrollElement:()=>t.current,count:p.length,estimateSize:o=>(p[o].type==="header"?45:269)+12,overscan:5});return e.jsx("div",{ref:t,className:"h-[calc(100vh-180px)] overflow-y-auto",children:e.jsx("div",{style:{height:`${y.getTotalSize()}px`,position:"relative"},className:"w-full",children:y.getVirtualItems().map(o=>{const l=p[o.index];return e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${o.size}px`,transform:`translateY(${o.start}px)`},children:l.type==="header"?e.jsx("h2",{className:"mt-10 w-[900px] mx-auto scroll-m-20 border-b pb-2 text-3xl font-semibold tracking-tight transition-colors first:mt-0",children:l.data.row.getValue("pack")}):e.jsx("div",{className:"flex justify-center gap-5",children:l.data.map(({row:u})=>{const m=u.original;return n(m)})})},o.key)})})})}function $({card:a}){const n=(a.amount_owned||1)-1,d=n*x[a.rarity];return e.jsxs("div",{className:"flex flex-col items-center gap-y-2 w-fit border border-gray-700 p-4 rounded-lg shadow-md hover:shadow-lg transition duration-200 group",children:[e.jsx(h,{card:a,selected:!0,setIsSelected:()=>{}},`card_${a.card_id}`),e.jsxs("p",{className:"text-[12px] font-semibold whitespace-nowrap overflow-hidden text-ellipsis max-w-[130px]",children:[a.card_id," - ",a.name]}),e.jsxs("div",{className:"flex flex-row gap-x-2",children:[e.jsx("div",{className:"bg-fuchsia-600 rounded-xl",children:e.jsx("span",{className:"text-lg font-semibold m-3",children:n})}),e.jsx("div",{className:"bg-gray-600 rounded-xl",children:e.jsx("span",{className:"text-lg font-semibold m-3",children:d})})]})]},`div_${a.card_id}`)}function I({ownedCards:a}){const n=w.filter(r=>r.tradeable).map(r=>r.id),d=Object.fromEntries(Object.entries(x).filter(([r,i])=>i>0)),t=a.filter(r=>r.amount_owned>1),s=b.filter(r=>t.findIndex(i=>i.card_id===r.card_id)>-1).map(r=>{var i;return{...r,amount_owned:(i=t.find(_=>_.card_id===r.card_id))==null?void 0:i.amount_owned}});return e.jsx(j,{cards:s.filter(r=>Object.keys(d).includes(r.rarity)&&n.includes(r.expansion)),cardElement:r=>e.jsx($,{card:r})})}function M({card:a}){return e.jsxs("div",{className:"flex flex-col items-center gap-y-2 w-fit border border-gray-700 p-4 rounded-lg shadow-md hover:shadow-lg transition duration-200 group",children:[e.jsx(h,{card:a,selected:!0,setIsSelected:()=>{}},`card_${a.card_id}`),e.jsxs("p",{className:"text-[12px] font-semibold whitespace-nowrap overflow-hidden text-ellipsis max-w-[130px]",children:[a.card_id," - ",a.name]}),e.jsx("div",{className:"bg-gray-600 rounded-xl",children:e.jsx("span",{className:"text-lg font-semibold m-3",children:(a.amount_owned||1)-1})})]},`div_${a.card_id}`)}function S({ownedCards:a}){const n=w.filter(s=>s.tradeable).map(s=>s.id),d=a.filter(s=>s.amount_owned>1),t=b.filter(s=>d.findIndex(r=>r.card_id===s.card_id)>-1).map(s=>{var r;return{...s,amount_owned:(r=d.find(i=>i.card_id===s.card_id))==null?void 0:r.amount_owned}});return e.jsx(j,{cards:t.filter(s=>Object.keys(x).includes(s.rarity)&&n.includes(s.expansion)),cardElement:s=>e.jsx(M,{card:s})})}function G({card:a}){return e.jsxs("div",{className:"flex flex-col items-center gap-y-2 w-fit border border-gray-700 p-4 rounded-lg shadow-md hover:shadow-lg transition duration-200 group",children:[e.jsx(h,{card:a,selected:!0,setIsSelected:()=>{}},`card_${a.card_id}`),e.jsxs("p",{className:"text-[12px] font-semibold whitespace-nowrap overflow-hidden text-ellipsis max-w-[130px]",children:[a.card_id," - ",a.name]}),e.jsx("div",{className:"bg-gray-600 rounded-xl",children:e.jsx("span",{className:"text-lg font-semibold m-3",children:x[a.rarity]})})]},`div_${a.card_id}`)}function O({ownedCards:a}){const n=b.filter(t=>a.findIndex(s=>s.card_id===t.card_id)===-1),d=w.filter(t=>t.tradeable).map(t=>t.id);return e.jsx(j,{cards:n.filter(t=>Object.keys(x).includes(t.rarity)&&d.includes(t.expansion)),cardElement:t=>e.jsx(G,{card:t})})}function B({user:a,ownedCards:n}){return a?e.jsx("div",{className:"flex flex-col gap-y-4",children:e.jsxs(E,{defaultValue:"looking_for",children:[e.jsx("div",{className:"max-w-[900px] mx-auto",children:e.jsxs(F,{className:"m-auto mt-4 mb-8",children:[e.jsx(f,{value:"looking_for",children:"Looking For"}),e.jsx(f,{value:"for_trade",children:"For Trade"}),e.jsx(f,{value:"buying_tokens",children:"Buying Tokens"})]})}),e.jsxs("div",{className:"max-w-auto mx-auto",children:[e.jsx(g,{value:"looking_for",children:e.jsx(O,{ownedCards:n})}),e.jsx(g,{value:"for_trade",children:e.jsx(S,{ownedCards:n})}),e.jsx(g,{value:"buying_tokens",children:e.jsx(I,{ownedCards:n})})]})]})}):null}export{B as default};
