import{u as v,Q as _,O as b,r as l,q as y,F as w,j as e,D,w as E,x as T,y as C}from"./index-BL_IAj5F.js";const x=["◊","◊◊","◊◊◊","◊◊◊◊","☆"],O=({ownedCards:i,friendCards:d})=>{const{t:r}=v("trade-matches"),c=_(),N=b(),[f,p]=l.useState(!1);l.useEffect(()=>{c.pathname.includes("/collection")&&c.pathname.includes("/trade")?f||p(!0):p(!1)},[c]);const j=l.useMemo(()=>y.filter(s=>s.tradeable).map(s=>s.id),[]),o=l.useMemo(()=>{const s={"◊":[],"◊◊":[],"◊◊◊":[],"◊◊◊◊":[],"☆":[],"☆☆":[],"☆☆☆":[],"✵":[],"✵✵":[],"Crown Rare":[],Unknown:[],"":[]},n=d.filter(a=>a.amount_owned>=2),h=new Set(i.filter(a=>a.amount_owned>0).map(a=>a.card_id)),u=n.filter(a=>!h.has(a.card_id));for(const a of u){const t=w(a.card_id);t&&x.includes(t.rarity)&&j.includes(t.expansion)&&s[t.rarity].push({...t,amount_owned:a.amount_owned})}return s},[i,d]),m=l.useMemo(()=>{const s={"◊":[],"◊◊":[],"◊◊◊":[],"◊◊◊◊":[],"☆":[],"☆☆":[],"☆☆☆":[],"✵":[],"✵✵":[],"Crown Rare":[],Unknown:[],"":[]},n=i.filter(a=>a.amount_owned>=2),h=new Set(d.filter(a=>a.amount_owned>0).map(a=>a.card_id)),u=n.filter(a=>!h.has(a.card_id));for(const a of u){const t=w(a.card_id);t&&x.includes(t.rarity)&&j.includes(t.expansion)&&s[t.rarity].push({...t,amount_owned:a.amount_owned})}return s},[i,d]),g=l.useMemo(()=>x.some(s=>o[s].length>0&&m[s].length>0),[o,m]);return e.jsx(D,{open:f,onOpenChange:s=>{s||N(c.pathname.replace("/trade",""))},children:e.jsxs(E,{className:"border-2 border-slate-600 shadow-none max-w-4xl h-[90vh] content-start",children:[e.jsx(T,{children:e.jsx(C,{children:r("title")})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"pb-2",children:r("featureDescription")}),!g&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-xl text-gray-500",children:r("noPossibleTrades")}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:r("noPossibleTradesDescription")})]}),x.map(s=>o[s].length>0&&m[s].length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium mb-2",children:r("friendHas")}),e.jsx("div",{className:"border rounded p-2 max-h-60 overflow-y-auto",children:e.jsx("ul",{className:"space-y-1",children:o[s].map(n=>e.jsxs("li",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"min-w-14 me-4",children:n.card_id}),e.jsx("div",{children:n.name})]}),e.jsxs("span",{className:"text-gray-500",children:["×",n.amount_owned]})]},n.card_id))})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium mb-2",children:r("youHave")}),e.jsx("div",{className:"border rounded p-2 max-h-60 overflow-y-auto",children:e.jsx("ul",{className:"space-y-1",children:m[s].map(n=>e.jsxs("li",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"min-w-14 me-4",children:n.card_id}),e.jsx("div",{children:n.name})]}),e.jsxs("span",{className:"text-gray-500",children:["×",n.amount_owned]})]},n.card_id))})})]})]})]},s))]})]})})};export{O as default};
