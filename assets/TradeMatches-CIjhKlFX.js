import{u as b,_ as y,Z as D,r as l,z as C,O as N,j as e,E,F as M,G as T,H as O,J as S}from"./index-oYXSxFDU.js";import{S as H}from"./SocialShareButtons-1UH-JM5u.js";import"./index-DinwwDST.js";const x=["◊","◊◊","◊◊◊","◊◊◊◊","☆"],R=({ownedCards:i,friendCards:c,ownCollection:p})=>{const{t:r}=b("trade-matches"),o=y(),w=D(),[f,j]=l.useState(!1);l.useEffect(()=>{o.pathname.includes("/collection")&&o.pathname.includes("/trade")?f||j(!0):j(!1)},[o]);const g=l.useMemo(()=>C.filter(s=>s.tradeable).map(s=>s.id),[]),d=l.useMemo(()=>{const s={"◊":[],"◊◊":[],"◊◊◊":[],"◊◊◊◊":[],"☆":[],"☆☆":[],"☆☆☆":[],"✵":[],"✵✵":[],"Crown Rare":[],Unknown:[],"":[]},n=c.filter(a=>a.amount_owned>=2),h=new Set(i.filter(a=>a.amount_owned>0).map(a=>a.card_id)),u=n.filter(a=>!h.has(a.card_id));for(const a of u){const t=N(a.card_id);t&&x.includes(t.rarity)&&g.includes(t.expansion)&&s[t.rarity].push({...t,amount_owned:a.amount_owned})}return s},[i,c]),m=l.useMemo(()=>{const s={"◊":[],"◊◊":[],"◊◊◊":[],"◊◊◊◊":[],"☆":[],"☆☆":[],"☆☆☆":[],"✵":[],"✵✵":[],"Crown Rare":[],Unknown:[],"":[]},n=i.filter(a=>a.amount_owned>=2),h=new Set(c.filter(a=>a.amount_owned>0).map(a=>a.card_id)),u=n.filter(a=>!h.has(a.card_id));for(const a of u){const t=N(a.card_id);t&&x.includes(t.rarity)&&g.includes(t.expansion)&&s[t.rarity].push({...t,amount_owned:a.amount_owned})}return s},[i,c]),v=l.useMemo(()=>x.some(s=>d[s].length>0&&m[s].length>0),[d,m]),_=()=>p?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-xl text-gray-500",children:r("ownCollection")}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:r("ownCollectionDescription")})]}):v?x.map(s=>d[s].length>0&&m[s].length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium mb-2",children:r("friendHas")}),e.jsx("div",{className:"border rounded p-2 max-h-60 overflow-y-auto",children:e.jsx("ul",{className:"space-y-1",children:d[s].map(n=>e.jsxs("li",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"min-w-14 me-4",children:n.card_id}),e.jsx("div",{children:n.name})]}),e.jsxs("span",{className:"text-gray-500",children:["×",n.amount_owned]})]},n.card_id))})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium mb-2",children:r("youHave")}),e.jsx("div",{className:"border rounded p-2 max-h-60 overflow-y-auto",children:e.jsx("ul",{className:"space-y-1",children:m[s].map(n=>e.jsxs("li",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"min-w-14 me-4",children:n.card_id}),e.jsx("div",{children:n.name})]}),e.jsxs("span",{className:"text-gray-500",children:["×",n.amount_owned]})]},n.card_id))})})]})]})]},s)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-xl text-gray-500",children:r("noPossibleTrades")}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:r("noPossibleTradesDescription")})]});return e.jsx(E,{open:f,onOpenChange:s=>{s||w(o.pathname.replace("/trade",""))},children:e.jsxs(M,{className:"border-2 border-slate-600 shadow-none max-w-4xl h-[90vh] content-start flex flex-col",children:[e.jsx(T,{children:e.jsx(O,{children:r("title")})}),e.jsxs("div",{className:"flex flex-col gap-4 grow",children:[e.jsx("p",{className:"pb-2",children:r("featureDescription")}),_()]}),p&&e.jsx(S,{children:e.jsx(H,{})})]})})};export{R as default};
