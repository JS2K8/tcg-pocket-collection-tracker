import{j as e,r,C as g,o as p,s as N,i as y,t as _,U as C}from"./index-DZxv3qX6.js";import{R as v}from"./RarityFilter-Bs775UH8.js";import{T,a as M,b,c as j}from"./tabs-BAtfh8Qs.js";import{C as w}from"./CardsTable-BQBreeVU.js";import{A as x,a as m,b as h}from"./alert-MvbcPXvE.js";import{S as f}from"./siren-DwF-3ZtW.js";function I(){return e.jsx("article",{className:"mx-auto grid max-w-4xl gap-5",children:e.jsxs(x,{className:"mb-8 border-2 border-slate-600 shadow-none",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx(m,{children:"You have no sellable cards!"}),e.jsx(h,{children:"If you believe you have sellable cards, go to the collections page and input your collected cards to see what you can sell."})]})})}const S=({rarityFilter:d,minCards:n})=>{const{ownedCards:t}=r.use(g),l=r.useMemo(()=>t.filter(a=>a.amount_owned>=n),[t,n]),i=r.useMemo(()=>p.filter(a=>l.findIndex(s=>s.card_id===a.card_id)>-1).map(a=>{var s;return{...a,amount_owned:(s=l.find(u=>u.card_id===a.card_id))==null?void 0:s.amount_owned}}),[l]),o=r.useMemo(()=>i.filter(a=>Object.keys(N).includes(a.rarity)),[i]),c=r.useMemo(()=>o.filter(a=>d.length===0||d.includes(a.rarity)),[o,d]);return o&&o.length>0?e.jsx(w,{cards:c}):e.jsx(I,{})};function B(){return e.jsx("article",{className:"mx-auto grid max-w-4xl gap-5",children:e.jsxs(x,{className:"mb-8 border-2 border-slate-600 shadow-none",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx(m,{children:"Go track your cards"}),e.jsx(h,{children:"By tracking your cards, you can see what cards you still need to get, what cards you can trade with friends, and how many trade tokens you can earn with your current collection."})]})})}function E(){return e.jsx("article",{className:"mx-auto grid max-w-4xl gap-5",children:e.jsxs(x,{className:"mb-8 border-2 border-slate-600 shadow-none",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx(m,{children:"You have no tradeable cards!"}),e.jsx(h,{children:"Go to the collections page and input your collected cards to see what you can trade."})]})})}const F=({rarityFilter:d,minCards:n})=>{const{ownedCards:t}=r.use(g);if(!t||t.every(s=>s.amount_owned<n))return e.jsx(B,{});const l=r.useMemo(()=>y.filter(s=>s.tradeable).map(s=>s.id),[]),i=r.useMemo(()=>t.filter(s=>s.amount_owned>=n),[t,n]),o=r.useMemo(()=>p.filter(s=>i.findIndex(u=>u.card_id===s.card_id)>-1).map(s=>{var u;return{...s,amount_owned:(u=i.find(k=>k.card_id===s.card_id))==null?void 0:u.amount_owned}}),[i]),c=r.useMemo(()=>o.filter(s=>Object.keys(_).includes(s.rarity)&&l.includes(s.expansion)),[o]),a=r.useMemo(()=>c.filter(s=>d.length===0||d.includes(s.rarity)),[c,d]);return c&&c.length>0?e.jsx(w,{cards:a}):e.jsx(E,{})};function R(){return e.jsx("article",{className:"mx-auto grid max-w-4xl gap-5",children:e.jsxs(x,{className:"mb-8 border-2 border-slate-600 shadow-none",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx(m,{children:"You have all tradeable cards!"}),e.jsx(h,{children:"Make sure you come back here when new rarities and packs are available for trade."})]})})}const A=({rarityFilter:d,minCards:n})=>{const{ownedCards:t}=r.use(g),l=r.useMemo(()=>p.filter(a=>t.findIndex(s=>s.card_id===a.card_id)===-1||t[t.findIndex(s=>s.card_id===a.card_id)].amount_owned<=n),[t,n]),i=r.useMemo(()=>y.filter(a=>a.tradeable).map(a=>a.id),[]),o=r.useMemo(()=>l.filter(a=>Object.keys(_).includes(a.rarity)&&i.includes(a.expansion)),[l]),c=r.useMemo(()=>o.filter(a=>d.length===0||d.includes(a.rarity)),[o,d]);return o&&o.length>0?e.jsx(w,{cards:c}):e.jsx(R,{})};function L(){return e.jsx("article",{className:"mx-auto grid max-w-4xl gap-5",children:e.jsxs(x,{className:"mb-8 border-2 border-slate-600 shadow-none",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx(m,{children:"Sign up to view your tradeable cards"}),e.jsx(h,{children:"By registering, you can keep track of your collection, trade with other users, and access exclusive features."})]})})}function q(){const{user:d}=r.use(C),[n,t]=r.useState([]),[l,i]=r.useState(2),[o,c]=r.useState("looking_for");return d?e.jsx("div",{className:"flex flex-col gap-y-4",children:e.jsxs(T,{defaultValue:o,onValueChange:a=>{switch(a){case"looking_for":i(0);break;case"for_trade":i(2);break;case"buying_tokens":i(3);break}c(a)},children:[e.jsxs("div",{className:"mx-auto max-w-[900px] flex flex-row flex-wrap align-center gap-4 p-8",children:[e.jsxs(M,{className:"flex-grow m-auto flex-wrap h-auto border-2 border-slate-600 rounded-md",children:[e.jsx(b,{value:"looking_for",children:"Looking For"}),e.jsx(b,{value:"for_trade",children:"For Trade"}),e.jsx(b,{value:"buying_tokens",children:"Buying Tokens"})]}),e.jsx(v,{rarityFilter:n,setRarityFilter:t}),e.jsx("div",{className:"px-3 py-1 border-2 border-slate-600 rounded-md",children:e.jsxs("label",{className:"flex items-center gap-x-2 text-white/50 text-sm",children:[o==="looking_for"?"Maximum":"Minimum"," number of cards:",e.jsx("select",{value:l,onChange:a=>i(Number.parseInt(a.target.value)),className:"p-1",children:[0,1,2,3,4,5].map(a=>e.jsx("option",{value:a,children:a},a))})]})})]}),e.jsxs("div",{className:"max-w-auto mx-4 md:mx-8",children:[e.jsx(j,{value:"looking_for",children:e.jsx(A,{rarityFilter:n,minCards:l})}),e.jsx(j,{value:"for_trade",children:e.jsx(F,{rarityFilter:n,minCards:l})}),e.jsx(j,{value:"buying_tokens",children:e.jsx(S,{rarityFilter:n,minCards:l})})]})]})}):e.jsx(L,{})}export{q as default};
