import{r as h,j as e}from"./index-Dhv0L00r.js";import{d as j,u as b,e as y,F as v,g as k,f as R,T as _,a as T,b as c,c as u}from"./FancyCard-C1V6_UeP.js";import{b as C,c as N,d as F,f as M}from"./CardsDB-9JEw2__L.js";const f={"◊":0,"◊◊":0,"◊◊◊":120,"◊◊◊◊":500,"☆":500};function z({cards:l}){const t=j(),d=h.useRef(null),m=h.useMemo(()=>[t.accessor("image",{id:"imageUrl"}),t.accessor("card_id",{id:"card_id"}),t.accessor("name",{id:"name"}),t.accessor("pack",{id:"pack"})],[]),n=b({columns:m,data:l.filter(a=>Object.keys(f).includes(a.rarity)),enableGrouping:!0,getCoreRowModel:R(),getGroupedRowModel:k(),initialState:{grouping:["pack"]}}).getRowModel().rows.map(a=>{const s={type:"header",row:a},i=a.subRows.map(o=>({type:"data",row:o})),r=[];for(let o=0;o<i.length;o+=5)r.push(i.slice(o,o+5));return{header:s,gridRows:r}}).flatMap(a=>[{type:"header",height:45,data:a.header},...a.gridRows.map(s=>({type:"gridRow",height:269,data:s}))]),x=y({getScrollElement:()=>d.current,count:n.length,estimateSize:a=>(n[a].type==="header"?45:269)+12,overscan:5});return e.jsx("div",{ref:d,className:"h-[calc(100vh-180px)] overflow-y-auto",children:e.jsx("div",{style:{height:`${x.getTotalSize()}px`,position:"relative"},className:"w-full",children:x.getVirtualItems().map(a=>{const s=n[a.index];return console.log("Row",s),e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${a.size}px`,transform:`translateY(${a.start}px)`},children:s.type==="header"?e.jsx("h2",{className:"mt-10 w-[900px] mx-auto scroll-m-20 border-b pb-2 text-3xl font-semibold tracking-tight transition-colors first:mt-0",children:s.data.row.getValue("pack")}):e.jsx("div",{className:"flex justify-center gap-5",children:s.data.map(({row:i})=>{const r=i.original;return e.jsxs("div",{className:"flex flex-col items-center gap-y-2 w-fit border border-gray-700 p-4 rounded-lg shadow-md hover:shadow-lg transition duration-200 group",children:[e.jsx(v,{card:r,selected:!0,setIsSelected:()=>{}},`card_${r.card_id}`),e.jsxs("p",{className:"text-[12px] font-semibold whitespace-nowrap overflow-hidden text-ellipsis max-w-[130px]",children:[r.card_id," - ",r.name]}),e.jsx("div",{className:"bg-gray-600 rounded-xl",children:e.jsx("span",{className:"text-lg font-semibold m-3",children:f[r.rarity]})})]},`div_${i.original.card_id}`)})})},a.key)})})})}function $({user:l,ownedCards:t}){const d=()=>[...C,...N,...F,...M].filter(p=>t.findIndex(g=>g.card_id===p.card_id)===-1);return l?e.jsx("div",{className:"flex flex-col gap-y-4",children:e.jsxs(_,{defaultValue:"looking_for",children:[e.jsx("div",{className:"max-w-[900px] mx-auto",children:e.jsxs(T,{className:"m-auto mt-4 mb-8",children:[e.jsx(c,{value:"looking_for",children:"Looking For"}),e.jsx(c,{value:"for_trade",children:"For Trade"}),e.jsx(c,{value:"buying_tokens",children:"Buying Tokens"})]})}),e.jsxs("div",{className:"max-w-auto mx-auto",children:[e.jsx(u,{value:"looking_for",children:e.jsx(z,{cards:d()})}),e.jsx(u,{value:"for_trade",children:e.jsx("span",{children:"For Trade"})}),e.jsx(u,{value:"buying_tokens",children:e.jsx("span",{children:"Buying Tokens"})})]})]})}):null}export{$ as default};
